<UserControl x:Class="GameCapturePlayer.IntroOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid x:Name="Root" Background="#7030a0" Opacity="1">
        <Grid.Resources>
            <!-- Continuous rotation for the spinner arc -->
            <Storyboard x:Key="IntroRotateStoryboard" RepeatBehavior="Forever">
                <DoubleAnimation Storyboard.TargetName="spinnerRotation"
                                 Storyboard.TargetProperty="Angle" From="0" To="360"
                                 Duration="0:0:1.2" RepeatBehavior="Forever" />
            </Storyboard>

            <!-- Fade the whole overlay out; caller collapses/close it when done -->
            <Storyboard x:Key="IntroFadeOutStoryboard">
                <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.28" />
            </Storyboard>
        </Grid.Resources>

        <Grid x:Name="logoContainer" HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="1" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <ScaleTransform ScaleX="1" ScaleY="1" />
            </Grid.RenderTransform>

            <!-- Image with a centered spinner overlay -->
            <Grid>
                <Image Source="pack://application:,,,/img/loading.png"
                       Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"
                       Width="480" Height="Auto" />
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5">
                    <Grid.RenderTransform>
                        <TransformGroup>
                            <RotateTransform x:Name="spinnerRotation" Angle="0" />
                            <TranslateTransform X="-75" Y="-50" />
                        </TransformGroup>
                    </Grid.RenderTransform>
                    <Ellipse Width="64" Height="64" Stroke="#44FFFFFF" StrokeThickness="5" />
                    <Ellipse Width="64" Height="64" Stroke="#FFFFFFFF" StrokeThickness="5"
                             StrokeDashArray="8 80" StrokeStartLineCap="Round" StrokeEndLineCap="Round" />
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
